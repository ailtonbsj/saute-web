"use strict";(self.webpackChunksaute_web=self.webpackChunksaute_web||[]).push([[846],{4846:(y,u,a)=>{a.r(u),a.d(u,{ConfiguracoesModule:()=>k});var p=a(6895),m=a(9299),d=a(9300),Z=a(3900),g=a(361),e=a(4650),C=a(2910),s=a(4006),b=a(7392),v=a(4859),f=a(9549),_=a(4144);function A(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"span",1),e._uU(3,"Backup e Restore"),e.qZA()(),e.TgZ(4,"div",0)(5,"span",22),e._uU(6,"Backup"),e.qZA()(),e.TgZ(7,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBackup())}),e._uU(8,"Clique para realizar o backup"),e.qZA(),e.TgZ(9,"div",0)(10,"span",22),e._uU(11,"Limpar Banco de dados"),e.qZA()(),e.TgZ(12,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onClear())}),e._uU(13,"Clique para LIMPAR o banco completamente"),e.qZA(),e.TgZ(14,"div",0)(15,"span",22),e._uU(16,"Restaura\xe7\xe3o"),e.qZA()(),e.TgZ(17,"div")(18,"mat-form-field",25)(19,"mat-label"),e._uU(20,"Arquivo"),e.qZA(),e.TgZ(21,"input",26),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(25);return e.KtG(o.click())}),e.qZA()(),e.TgZ(22,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onRestore())}),e._uU(23,"Restaurar"),e.qZA(),e.TgZ(24,"input",28,29),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onChooseFile(o))}),e.qZA()()()}if(2&i){const t=e.MAs(25);let n;e.xp6(21),e.Q6J("value",null==t.files||null==(n=t.files.item(0))?null:n.name)}}const T=[{path:"",component:(()=>{class i{constructor(t,n,o){this.service=t,this.helper=n,this.fb=o,this.api=localStorage.getItem("api")||"local",this.apiEnabled=!1,this.form=this.fb.group({text:[""],sign1:[""],sign2:[""],api:[""]}),this.logo1={},this.logo2={},this.logo1Blob="/assets/logo1.png",this.logo2Blob="/assets/logo2.png",this.apiEnabled="local"!==this.api}ngOnInit(){this.form.controls.api.setValue(localStorage.getItem("api")||""),this.service.getDataReport().subscribe({next:t=>{t&&(this.form.patchValue(t),t.logo1&&(this.logo1Blob=t.logo1),t.logo2&&(this.logo2Blob=t.logo2))}})}onBackup(){this.service.backup().subscribe({next:t=>{const n=new Blob([t],{type:"text/json"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(n),o.download="bkp_"+ +new Date+".json",document.body.appendChild(o),o.click(),document.body.removeChild(o)}})}onClear(){this.helper.confirmDialog().pipe((0,d.h)(t=>t),(0,Z.w)(t=>this.service.clear())).subscribe({next:t=>{this.helper.alertSnack("Bancos removidos com sucesso! Voc\xea ser\xe1 redirecionado em 3 segundos!"),setTimeout(()=>window.location.href="/",3500)}})}onRestore(){this.fileBackup&&this.helper.fileReader(this.fileBackup,g.p.TEXT).then(t=>{try{const n=JSON.parse(t);this.service.restore(n).subscribe({next:()=>this.helper.alertSnack("Restaurado!"),error:()=>this.helper.alertSnack("Erro ao tentar restaurar!")})}catch{this.helper.alertSnack("Erro ao tentar restaurar!")}})}onChooseFile(t){this.fileBackup=t.target.files?.item(0)}chooseLogo1(t){const n=t.target.files?.item(0);n&&this.helper.fileReader(n).then(o=>this.helper.image(o)).then(o=>this.logo1Blob=this.helper.resizePicute(o,500))}chooseLogo2(t){const n=t.target.files?.item(0);n&&this.helper.fileReader(n).then(o=>this.helper.image(o)).then(o=>this.logo2Blob=this.helper.resizePicute(o,500))}saveDataReport(){""!==this.form.value.api&&localStorage.setItem("api",this.form.value.api);const t={...this.form.value};delete t.api,"/assets/logo1.png"!==this.logo1Blob&&(t.logo1=this.logo1Blob),"/assets/logo2.png"!==this.logo2Blob&&(t.logo2=this.logo2Blob),this.service.saveDataReport(t).subscribe({next:()=>this.helper.alertSnack("Configura\xe7\xf5es salvas!")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.g),e.Y36(g.W),e.Y36(s.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-configuracoes"]],decls:51,vars:6,consts:[[1,"mb-2"],[1,"mat-h1"],[1,"flex-form",3,"formGroup"],[1,"ocupy","flex"],[1,"pic-preview",3,"src"],[1,"flex-upload"],["matInput","","type","text","placeholder","Logo 1","disabled","",3,"value"],["type","button","mat-flat-button","","color","primary",3,"click"],["hidden","","type","file","accept","image/*",3,"change"],["logo1",""],["matInput","","type","text","placeholder","Logo 2","disabled","",3,"value"],["logo2",""],[1,"ocupy"],["matInput","","placeholder","Texto principal","formControlName","text","rows","5"],[1,""],["matInput","","type","text","placeholder","Assinatura 1","formControlName","sign1"],["matInput","","type","text","placeholder","Assinatura 2","formControlName","sign2"],["matInput","","type","text","placeholder","API","formControlName","api"],[1,"bottom-form"],[1,"toolbar-spacer"],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],[1,"mat-h2"],["mat-raised-button","","color","primary",1,"mb-2",3,"click"],["mat-raised-button","","color","warn",1,"mb-2",3,"click"],[2,"width","200px"],["matInput","","type","text","placeholder","Arquivo","readonly","",3,"value","click"],["type","button","mat-flat-button","","color","accent",1,"ml-2",3,"click"],["hidden","","type","file","accept","application/JSON",3,"change"],["file",""]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Relat\xf3rio"),e.qZA()(),e.TgZ(3,"form",2)(4,"div",3),e._UZ(5,"img",4),e.TgZ(6,"div",5)(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Logo 1"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(16);return e.KtG(l.click())}),e.TgZ(12,"mat-icon"),e._uU(13,"attach_file"),e.qZA(),e._uU(14,"Anexar "),e.qZA(),e.TgZ(15,"input",8,9),e.NdJ("change",function(l){return n.chooseLogo1(l)}),e.qZA()()(),e.TgZ(17,"div",3),e._UZ(18,"img",4),e.TgZ(19,"div",5)(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Logo 2"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.TgZ(24,"button",7),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(29);return e.KtG(l.click())}),e.TgZ(25,"mat-icon"),e._uU(26,"attach_file"),e.qZA(),e._uU(27,"Anexar "),e.qZA(),e.TgZ(28,"input",8,11),e.NdJ("change",function(l){return n.chooseLogo2(l)}),e.qZA()()(),e.TgZ(30,"mat-form-field",12)(31,"mat-label"),e._uU(32,"Texto principal"),e.qZA(),e._UZ(33,"textarea",13),e.qZA(),e.TgZ(34,"mat-form-field",14)(35,"mat-label"),e._uU(36,"Assinatura 1"),e.qZA(),e._UZ(37,"input",15),e.qZA(),e.TgZ(38,"mat-form-field",14)(39,"mat-label"),e._uU(40,"Assinatura 2"),e.qZA(),e._UZ(41,"input",16),e.qZA(),e.TgZ(42,"mat-form-field",12)(43,"mat-label"),e._uU(44,"API"),e.qZA(),e._UZ(45,"input",17),e.qZA()(),e.TgZ(46,"div",18),e._UZ(47,"span",19),e.TgZ(48,"button",20),e.NdJ("click",function(){return n.saveDataReport()}),e._uU(49,"Salvar"),e.qZA()(),e.YNc(50,A,26,1,"div",21)}if(2&t){const o=e.MAs(16),r=e.MAs(29);let l,h;e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(2),e.s9C("src",n.logo1Blob,e.LSH),e.xp6(5),e.Q6J("value",null==o.files||null==(l=o.files.item(0))?null:l.name),e.xp6(8),e.s9C("src",n.logo2Blob,e.LSH),e.xp6(5),e.Q6J("value",null==r.files||null==(h=r.files.item(0))?null:h.name),e.xp6(27),e.Q6J("ngIf",!n.apiEnabled)}},dependencies:[p.O5,b.Hw,v.lW,f.KE,f.hX,_.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(T),m.Bz]}),i})();var U=a(9443);let k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,x,U.q,s.UX]}),i})()}}]);