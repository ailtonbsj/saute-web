"use strict";(self.webpackChunksaute_web=self.webpackChunksaute_web||[]).push([[592],{5513:(P,v,r)=>{r.d(v,{u:()=>a});var i=r(5861),n=r(2076),d=r(8505),E=r(4004),c=r(3900),D=r(1005),_=r(5698),h=r(9646),f=r(4020),p=r(4650),u=r(529);let a=(()=>{class t{constructor(e){this.http=e,this.table=f.db.autorizacao,this.api=localStorage.getItem("api")||"local",this.apiEnabled=!1,this.apiEnabled="local"!==this.api,this.apiEnabled&&(this.api+="/autorizacao")}index(){if(this.apiEnabled)return this.http.get(`${this.api}`);{let e;return(0,n.D)(this.table.toArray()).pipe((0,d.b)(o=>e=o),(0,E.U)(o=>o.map(l=>l.professorId)),(0,c.w)(o=>(0,n.D)(f.db.professor.bulkGet(o))),(0,E.U)(o=>e.map(l=>(l.professor=o.find(O=>O?.id===l.professorId),l.processoId))),(0,c.w)(o=>(0,n.D)(f.db.processo.bulkGet(o))),(0,E.U)(o=>e.map(l=>(l.processo=o.find(O=>O?.id===l.processoId),l))),(0,D.g)(1),(0,_.q)(1))}}show(e){if(this.apiEnabled)return this.http.get(`${this.api}/${e}`).pipe((0,E.U)(o=>(o.processo.instituicaoId=o.processo?.instituicao?.id,o)));{let o;return(0,n.D)(this.table.get(parseInt(`${e}`))).pipe((0,E.U)(l=>o=l||{}),(0,c.w)(l=>l.professorId?(0,n.D)(f.db.professor.get(l.professorId)):(0,h.of)({})),(0,E.U)(l=>(o.professor=l,o)),(0,c.w)(l=>l.processoId?(0,n.D)(f.db.processo.get(l.processoId)):(0,h.of)({})),(0,E.U)(l=>(o.processo=l,o)),(0,_.q)(1))}}transformToSave(e){return e.updatedAt=new Date,delete e.professor,delete e.processo,e}store(e){return this.apiEnabled?this.http.post(`${this.api}`,e):((e=this.transformToSave(e)).createdAt=new Date,(0,n.D)(this.table.add(e)).pipe((0,_.q)(1)))}update(e){return this.apiEnabled?this.http.patch(`${this.api}`,e):(e=this.transformToSave(e),(0,n.D)(this.table.put(e)).pipe((0,_.q)(1)))}destroy(e){return this.apiEnabled?this.http.delete(`${this.api}/${e}`):(0,n.D)(this.table.delete(e)).pipe((0,_.q)(1))}fillAutorizacaoWithProfessor(e){return(0,i.Z)(function*(){return e.professor=yield f.db.professor.get(e.professorId),e})()}getByProcess(e){if(this.apiEnabled)return this.http.get(`${this.api}/proc/${e}`);{const o=this.table.filter(l=>l.processoId===e).toArray().then(l=>l.map(this.fillAutorizacaoWithProfessor)).then(l=>Promise.all(l));return(0,n.D)(o)}}}return t.\u0275fac=function(e){return new(e||t)(p.LFG(u.eN))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2910:(P,v,r)=>{r.d(v,{g:()=>_});var i=r(5861),n=r(2076),d=r(5698),E=r(9646),c=r(4020),D=r(4650);let _=(()=>{class h{constructor(){}backup(){function u(){return(u=(0,i.Z)(function*(){const a=yield c.db.nivelEscolar.toArray(),t=yield c.db.professor.toArray(),s=yield c.db.instituicao.toArray(),e=yield c.db.processo.toArray(),o=yield c.db.autorizacao.toArray(),l=yield c.db.configuracao.toArray();return JSON.stringify({nivelEscolares:a,professores:t,instituiccoes:s,processos:e,autorizacoes:o,configuracoes:l})})).apply(this,arguments)}return(0,n.D)(function p(){return u.apply(this,arguments)}()).pipe((0,d.q)(1))}clear(){const p=function(){var u=(0,i.Z)(function*(){(yield window.indexedDB.databases()).forEach(t=>{window.indexedDB.deleteDatabase(t.name)})});return function(){return u.apply(this,arguments)}}();return(0,n.D)(p()).pipe((0,d.q)(1))}restore(p){return c.db.nivelEscolar.bulkAdd(p.nivelEscolares),c.db.professor.bulkAdd(p.professores),c.db.instituicao.bulkAdd(p.instituiccoes),c.db.processo.bulkAdd(p.processos),c.db.autorizacao.bulkAdd(p.autorizacoes),c.db.configuracao.bulkAdd(p.configuracoes),(0,E.of)({status:"success"}).pipe((0,d.q)(1))}saveDataReportAsync(p){return(0,i.Z)(function*(){return 0===(yield c.db.configuracao.count())?c.db.configuracao.add({id:0,...p}):c.db.configuracao.put({id:0,...p}),"success"})()}saveDataReport(p){const u=this.saveDataReportAsync(p);return(0,n.D)(u).pipe((0,d.q)(1))}getDataReport(){return(0,n.D)(c.db.configuracao.get(0)).pipe((0,d.q)(1))}}return h.\u0275fac=function(p){return new(p||h)},h.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},6489:(P,v,r)=>{r.d(v,{W:()=>u});var i=r(5861),n=r(2076),d=r(1005),E=r(5698),c=r(4004),D=r(3900),_=r(9646),h=r(4020),f=r(4650),p=r(529);let u=(()=>{class a{constructor(s){this.http=s,this.api=localStorage.getItem("api")||"local",this.apiEnabled=!1,this.apiEnabled="local"!==this.api,this.apiEnabled&&(this.api+="/instituicao")}indexAsync(){return(0,i.Z)(function*(){const s=yield h.db.instituicao.toArray(),e=s.map(l=>l.nivelEscolarId),o=yield h.db.nivelEscolar.bulkGet(e);return s.map(l=>(l.nivelEscolar=o.find(O=>O?.id===l.nivelEscolarId),l))})()}index(){return this.apiEnabled?this.http.get(`${this.api}`):(0,n.D)(this.indexAsync()).pipe((0,d.g)(1),(0,E.q)(1))}show(s){if(this.apiEnabled)return this.http.get(`${this.api}/${s}`);{let e;return(0,n.D)(h.db.instituicao.get(parseInt(`${s}`))).pipe((0,c.U)(o=>e=o||{}),(0,D.w)(o=>o.nivelEscolarId?(0,n.D)(h.db.nivelEscolar.get(o.nivelEscolarId)):(0,_.of)({})),(0,c.U)(o=>(e.nivelEscolar=o,e)),(0,E.q)(1))}}transformToSave(s){return s.endereco.uf=s.endereco.uf.nome,s.endereco.municipio=s.endereco.municipio.nome,s}store(s){return s=this.transformToSave(s),this.apiEnabled?this.http.post(`${this.api}`,s):(delete s.nivelEscolar,s.updatedAt=new Date,s.createdAt=new Date,(0,n.D)(h.db.instituicao.add(s)).pipe((0,E.q)(1)))}update(s){return s=this.transformToSave(s),this.apiEnabled?this.http.patch(`${this.api}`,s):(delete s.nivelEscolar,s.updatedAt=new Date,(0,n.D)(h.db.instituicao.put(s)).pipe((0,E.q)(1)))}destroy(s){if(this.apiEnabled)return this.http.delete(`${this.api}/${s}`);{const e=h.db.processo.toArray().then(o=>o.map(l=>l.instituicaoId)).then(o=>o.includes(s));return(0,n.D)(e).pipe((0,c.U)(o=>{if(o)throw new Error("Cannot remove.")}),(0,D.w)(()=>(0,n.D)(h.db.instituicao.delete(s))),(0,E.q)(1))}}filter(s){if(this.apiEnabled)return this.http.get(`${this.api}?q=${s}`);{const e=s.toLowerCase().replace(/[~`!@#$%^&*()+={}\[\];:\'\"<>.,\/\\\?-_]/g,""),o=h.db.instituicao.limit(5).filter(l=>new RegExp(e).test(l.instituicao.toLowerCase())).toArray();return(0,n.D)(o).pipe((0,d.g)(1),(0,E.q)(1))}}}return a.\u0275fac=function(s){return new(s||a)(f.LFG(p.eN))},a.\u0275prov=f.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},6055:(P,v,r)=>{r.d(v,{d:()=>f});var i=r(2076),n=r(1005),d=r(5698),E=r(4004),c=r(3900),D=r(4020),_=r(4650),h=r(529);let f=(()=>{class p{constructor(a){this.http=a,this.api=localStorage.getItem("api")||"local",this.apiEnabled=!1,this.apiEnabled="local"!==this.api,this.apiEnabled&&(this.api+="/nivelescolar")}index(){return this.apiEnabled?this.http.get(`${this.api}`):(0,i.D)(D.db.nivelEscolar.toArray()).pipe((0,n.g)(300),(0,d.q)(1))}store(a){return this.apiEnabled?this.http.post(`${this.api}`,a):(a.createdAt=new Date,a.updatedAt=new Date,(0,i.D)(D.db.nivelEscolar.add(a)).pipe((0,d.q)(1)))}show(a){return this.apiEnabled?this.http.get(`${this.api}/${a}`):(0,i.D)(D.db.nivelEscolar.get(parseInt(""+a)).then(t=>t||{})).pipe((0,d.q)(1))}update(a){return this.apiEnabled?this.http.patch(`${this.api}`,a):(a.updatedAt=new Date,(0,i.D)(D.db.nivelEscolar.put(a)).pipe((0,d.q)(1)))}destroy(a){if(this.apiEnabled)return this.http.delete(`${this.api}/${a}`);{const t=D.db.instituicao.toArray().then(s=>s.map(e=>e.nivelEscolarId)).then(s=>s.includes(a));return(0,i.D)(t).pipe((0,E.U)(s=>{if(s)throw new Error("Cannot remove.")}),(0,c.w)(()=>(0,i.D)(D.db.nivelEscolar.delete(a))),(0,d.q)(1))}}filter(a){if(this.apiEnabled)return this.http.get(`${this.api}?q=${a}`);{const t=a.toLowerCase().replace(/[~`!@#$%^&*()+={}\[\];:\'\"<>.,\/\\\?-_]/g,""),s=D.db.nivelEscolar.limit(5).filter(e=>new RegExp(t).test(e.nivelEscolar.toLowerCase())).toArray();return(0,i.D)(s).pipe((0,n.g)(1),(0,d.q)(1))}}}return p.\u0275fac=function(a){return new(a||p)(_.LFG(h.eN))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},2774:(P,v,r)=>{r.d(v,{P:()=>p});var i=r(2076),n=r(1005),d=r(5698),E=r(4004),c=r(3900),D=r(9646),_=r(4020),h=r(4650),f=r(529);let p=(()=>{class u{constructor(t){this.http=t,this.table=_.db.processo,this.api=localStorage.getItem("api")||"local",this.apiEnabled=!1,this.apiEnabled="local"!==this.api,this.apiEnabled&&(this.api+="/processo")}index(){if(this.apiEnabled)return this.http.get(`${this.api}`);{let t;const s=this.table.toArray().then(e=>(t=e,e)).then(e=>e.map(o=>o.instituicaoId)).then(e=>_.db.instituicao.bulkGet(e)).then(e=>t.map(o=>(o.instituicao=e.find(l=>l?.id===o.instituicaoId),o)));return(0,i.D)(s).pipe((0,n.g)(1),(0,d.q)(1))}}show(t){if(this.apiEnabled)return this.http.get(`${this.api}/${t}`);{let s,e;return(0,i.D)(this.table.get(parseInt(`${t}`))).pipe((0,E.U)(o=>s=o||{}),(0,c.w)(o=>o.instituicaoId?(0,i.D)(_.db.instituicao.get(o.instituicaoId)):(0,D.of)({})),(0,c.w)(o=>(e=o,(0,i.D)(_.db.nivelEscolar.get(o?.nivelEscolarId||0)))),(0,E.U)(o=>(e.nivelEscolar=o,e)),(0,E.U)(o=>(s.instituicao=o,s)),(0,d.q)(1))}}transformToSave(t){return t.updatedAt=new Date,delete t.instituicao,t}store(t){return this.apiEnabled?this.http.post(`${this.api}`,t):((t=this.transformToSave(t)).createdAt=new Date,(0,i.D)(this.table.add(t)).pipe((0,d.q)(1)))}update(t){return this.api?this.http.patch(`${this.api}`,t):(t=this.transformToSave(t),(0,i.D)(this.table.put(t)).pipe((0,d.q)(1)))}destroy(t){if(this.api)return this.http.delete(`${this.api}/${t}`);{const s=_.db.autorizacao.toArray().then(e=>e.map(o=>o.processoId)).then(e=>e.includes(t));return(0,i.D)(s).pipe((0,E.U)(e=>{if(e)throw new Error("Cannot remove.")}),(0,c.w)(()=>(0,i.D)(this.table.delete(t))),(0,d.q)(1))}}filter(t){if(this.apiEnabled)return this.http.get(`${this.api}?q=${t}`);{const s=t.toLowerCase().replace(/[~`!@#$%^&*()+={}\[\];:\'\"<>.,\/\\\?-_]/g,""),e=this.table.limit(5).filter(o=>new RegExp(s).test((""+o.numero).toLowerCase())).toArray();return(0,i.D)(e).pipe((0,n.g)(1),(0,d.q)(1))}}}return u.\u0275fac=function(t){return new(t||u)(h.LFG(f.eN))},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},4357:(P,v,r)=>{r.d(v,{c:()=>p});var i=r(2076),n=r(1005),d=r(5698),E=r(8505),c=r(4004),D=r(3900),_=r(4020),h=r(4650),f=r(529);let p=(()=>{class u{constructor(t){this.http=t,this.api=localStorage.getItem("api")||"local",this.apiEnabled=!1,this.apiEnabled="local"!==this.api,this.apiEnabled&&(this.api+="/professor")}index(){return this.apiEnabled?this.http.get(`${this.api}`):(0,i.D)(_.db.professor.toArray()).pipe((0,n.g)(1),(0,d.q)(1))}show(t){return this.apiEnabled?this.http.get(`${this.api}/${t}`):(0,i.D)(_.db.professor.get(parseInt(`${t}`))).pipe((0,E.b)(s=>console.log({...s?.endereco})),(0,c.U)(s=>s||{}),(0,d.q)(1))}transformToSave(t){return t.endereco.uf=t.endereco.uf.nome,t.endereco.municipio=t.endereco.municipio.nome,t.naturalidade=t.naturalidade.nome,t}store(t){return t=this.transformToSave(t),this.apiEnabled?this.http.post(`${this.api}`,t):(t.createdAt=new Date,t.updatedAt=new Date,(0,i.D)(_.db.professor.add(t)).pipe((0,d.q)(1)))}update(t){return t=this.transformToSave(t),this.apiEnabled?this.http.patch(`${this.api}`,t):(t.updatedAt=new Date,(0,i.D)(_.db.professor.put(t)).pipe((0,d.q)(1)))}destroy(t){if(this.apiEnabled)return this.http.delete(`${this.api}/${t}`);{const s=_.db.autorizacao.toArray().then(e=>e.map(o=>o.professorId)).then(e=>e.includes(t));return(0,i.D)(s).pipe((0,c.U)(e=>{if(e)throw new Error("Cannot remove.")}),(0,D.w)(()=>(0,i.D)(_.db.professor.delete(t))),(0,d.q)(1))}}filter(t){if(this.apiEnabled)return this.http.get(`${this.api}?q=${t}`);{const s=t.toLowerCase().replace(/[~`!@#$%^&*()+={}\[\];:\'\"<>.,\/\\\?-_]/g,""),e=_.db.professor.limit(5).filter(o=>new RegExp(s).test(o.nome.toLowerCase())).toArray();return(0,i.D)(e).pipe((0,n.g)(1),(0,d.q)(1))}}}return u.\u0275fac=function(t){return new(t||u)(h.LFG(f.eN))},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},5300:(P,v,r)=>{r.d(v,{N:()=>f});var i=r(5698),n=r(4004),d=r(1005),E=r(9646),c=r(9300),D=r(3900),_=r(4650),h=r(529);let f=(()=>{class p{constructor(a){this.http=a}getStates(){return this.http.get("assets/brazil/states.json").pipe((0,i.q)(1))}getCityByName(a){return this.http.get("assets/brazil/cities.json").pipe((0,n.U)(t=>t.find(s=>s.nome.toLowerCase()===a.toLowerCase())),(0,i.q)(1))}filterCities(a,t,s){const e=a.toLowerCase().replace(/[~`!@#$%^&*()+={}\[\];:\'\"<>.,\/\\\?-_]/g,"");let o=10;return s&&(o=s),this.http.get("assets/brazil/cities.json").pipe((0,n.U)(l=>{const O=[];for(let M of l)if((!t||M.estado===t)&&new RegExp(e).test(M.nome.toLowerCase())&&(O.push(M),0==--o))break;return O}),(0,d.g)(1),(0,i.q)(1))}searchByCEP(a){return""!=a&&/^[0-9]{8}$/.test(a)?this.http.get(`//viacep.com.br/ws/${a}/json/`).pipe((0,i.q)(1)):(0,E.of)({}).pipe((0,i.q)(1))}initCityAutocomplete(a,t){return a.valueChanges.pipe((0,c.h)(s=>!s.nome),(0,D.w)(s=>{let e;return t&&(e=t.value.id),this.filterCities(s,e)}))}}return p.\u0275fac=function(a){return new(a||p)(_.LFG(h.eN))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},3562:(P,v,r)=>{r.d(v,{d:()=>n});var i=r(4006);class n{static autocompleteValidator(){return E=>"string"==typeof E.value?{invalidAutocomplete:{value:E.value}}:null}static date(){return i.kI.pattern("^[1-2][0-9]{3}-[0-1][0-9]-[0-3][0-9]$")}static number(){return i.kI.pattern("^[0-9]*$")}}},3789:(P,v,r)=>{r.d(v,{h:()=>i});var i=(()=>{return(n=i||(i={}))[n.INSERT=0]="INSERT",n[n.UPDATE=1]="UPDATE",n[n.READ_ONLY=2]="READ_ONLY",i;var n})()}}]);