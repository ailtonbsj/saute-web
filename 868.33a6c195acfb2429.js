"use strict";(self.webpackChunksaute_web=self.webpackChunksaute_web||[]).push([[868],{3868:(_e,q,i)=>{i.r(q),i.d(q,{ProfessorModule:()=>de});var f=i(6895),p=i(9299),N=i(8739),C=i(6308),u=i(7155),T=i(9300),U=i(3900),Z=i(361),t=i(4650),x=i(4357),P=i(7392),D=i(4859),F=i(4850),A=i(8255),d=i(9549),E=i(4144),I=i(3162);function Q(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"mat-form-field",42)(1,"mat-label"),t._uU(2,"Filtrar por"),t.qZA(),t.TgZ(3,"mat-icon",43),t._uU(4,"filter_alt"),t.qZA(),t.TgZ(5,"input",44,45),t.NdJ("keyup",function(n){t.CHM(o);const l=t.oxw();return t.KtG(l.applyFilter(n))}),t.qZA()()}}function J(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"#"),t.qZA())}function B(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.id)}}function k(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Nome"),t.qZA())}function O(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.nome)}}function M(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Nascimento"),t.qZA())}function S(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,o.nascimento,"shortDate","","pt-BR"))}}function $(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Naturalidade"),t.qZA())}function H(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.naturalidade)}}function R(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"CPF"),t.qZA())}function G(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.cpf)}}function L(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"RG"),t.qZA())}function V(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.rg)}}function W(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Org\xe3o Emissor"),t.qZA())}function z(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.orgaoEmissor)}}function j(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"CEP"),t.qZA())}function w(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.endereco.cep)}}function K(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Rua"),t.qZA())}function X(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.endereco.rua)}}function tt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"N\xfamero"),t.qZA())}function et(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.endereco.numero)}}function ot(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Bairro"),t.qZA())}function rt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.endereco.bairro)}}function at(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Estado"),t.qZA())}function nt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.endereco.uf)}}function it(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Munic\xedpio"),t.qZA())}function mt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.endereco.municipio)}}function lt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Telefone"),t.qZA())}function st(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.telefone)}}function ut(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Celular"),t.qZA())}function ct(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.celular)}}function ft(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"E-mail"),t.qZA())}function pt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.email)}}function dt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Pai"),t.qZA())}function _t(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.pai)}}function ht(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"M\xe3e"),t.qZA())}function Zt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.mae)}}function gt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Habilita\xe7\xe3o"),t.qZA())}function Ct(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.habilitacao)}}function Tt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Categoria"),t.qZA())}function At(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.categoriaCNH)}}function bt(e,r){1&e&&(t.TgZ(0,"th",48),t._uU(1,"Foto"),t.qZA())}function qt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._UZ(1,"img",49),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Q6J("src",o.foto,t.LSH)}}function Nt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Criado em"),t.qZA())}function Ut(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,o.createdAt,"short","","pt-BR"))}}function xt(e,r){1&e&&(t.TgZ(0,"th",46),t._uU(1,"Atualizado em"),t.qZA())}function Pt(e,r){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,o.updatedAt,"short","","pt-BR"))}}function Dt(e,r){1&e&&(t.TgZ(0,"th",48),t._uU(1,"A\xe7\xf5es"),t.qZA())}function Et(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"td",47)(1,"button",50),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.onUpdate(l.id))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",51),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.onDelete(l.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function vt(e,r){1&e&&t._UZ(0,"tr",52)}function yt(e,r){1&e&&t._UZ(0,"tr",53)}function Yt(e,r){1&e&&t._UZ(0,"mat-progress-bar",54)}const Ft=function(){return[5,10,25,100]};let It=(()=>{class e{constructor(o,a,n){this.service=o,this.router=a,this.helper=n,this.isLoadingData=!0,this.isEnabledFilter=!1,this.displayedColumns=["id","nome","nascimento","naturalidade","cpf","rg","orgaoEmissor","endereco.cep","endereco.rua","endereco.numero","endereco.bairro","endereco.uf","endereco.municipio","telefone","celular","email","pai","mae","habilitacao","categoriaCNH","foto","createdAt","updatedAt","actions"],this.dataSource=new u.by([]),this.paginator={},this.sort={},this.loadDatatable()}ngOnInit(){}loadDatatable(){this.service.index().subscribe({next:o=>{this.dataSource=new u.by(o),this.dataSource.sortingDataAccessor=Z.W.nestedSortingDataAccessor,this.dataSource.filterPredicate=Z.W.nestedFilterPredicate,this.sort.sortables&&(this.dataSource.sort=this.sort),this.paginator.page&&(this.dataSource.paginator=this.paginator),this.isLoadingData=!1}})}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}onUpdate(o){this.router.navigate([`professor/${o}/edit`])}onDelete(o){this.helper.confirmDialog().pipe((0,T.h)(a=>a),(0,U.w)(a=>this.service.destroy(o))).subscribe({next:a=>{this.helper.alertSnack("Removido com sucesso!"),this.refreshComponent()},error:a=>this.defaultError(a)})}refreshComponent(){this.router.navigateByUrl("nivelescolar",{skipLocationChange:!0}).then(()=>{this.router.navigate(["professor"])})}defaultError(o){this.helper.alertSnack(403==o.status?"Sem permiss\xe3o para esta opera\xe7\xe3o":"Ocorreu um erro")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(x.c),t.Y36(p.F0),t.Y36(Z.W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-professor-datatable"]],viewQuery:function(o,a){if(1&o&&(t.Gf(N.NW,5),t.Gf(C.YE,5)),2&o){let n;t.iGM(n=t.CRH())&&(a.paginator=n.first),t.iGM(n=t.CRH())&&(a.sort=n.first)}},decls:98,vars:9,consts:[[1,"header-view"],[1,"mat-h1"],["vertical",""],[1,"toolbar-spacer"],["mat-raised-button","","color","primary","routerLink","/professor/create"],["mat-raised-button","","color","accent",1,"ml-2",3,"matMenuTriggerFor"],["optMenu","matMenu"],["mat-menu-item","",3,"click"],["appearance","standard",4,"ngIf"],[1,"datatable-panel"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","nascimento"],["matColumnDef","naturalidade"],["matColumnDef","cpf"],["matColumnDef","rg"],["matColumnDef","orgaoEmissor"],["matColumnDef","endereco.cep"],["matColumnDef","endereco.rua"],["matColumnDef","endereco.numero"],["matColumnDef","endereco.bairro"],["matColumnDef","endereco.uf"],["matColumnDef","endereco.municipio"],["matColumnDef","telefone"],["matColumnDef","celular"],["matColumnDef","email"],["matColumnDef","pai"],["matColumnDef","mae"],["matColumnDef","habilitacao"],["matColumnDef","categoriaCNH"],["matColumnDef","foto"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate",4,"ngIf"],[3,"pageSizeOptions","pageSize"],["appearance","standard"],["matSuffix",""],["matInput","","placeholder","",3,"keyup"],["input",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["width","60px",3,"src"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""],["mode","indeterminate"]],template:function(o,a){if(1&o&&(t.TgZ(0,"div",0)(1,"div")(2,"span",1),t._uU(3,"Professor"),t.qZA()(),t._UZ(4,"mat-divider",2)(5,"span",3),t.TgZ(6,"div")(7,"button",4),t._uU(8,"Novo Registro"),t.qZA(),t.TgZ(9,"button",5)(10,"mat-icon"),t._uU(11,"tune"),t.qZA()(),t.TgZ(12,"mat-menu",null,6)(14,"button",7),t.NdJ("click",function(){return a.isEnabledFilter=!a.isEnabledFilter}),t.TgZ(15,"mat-icon"),t._uU(16,"filter_alt"),t.qZA(),t.TgZ(17,"span"),t._uU(18,"Filtros"),t.qZA()()()()(),t.YNc(19,Q,7,0,"mat-form-field",8),t.TgZ(20,"div",9)(21,"table",10),t.ynx(22,11),t.YNc(23,J,2,0,"th",12),t.YNc(24,B,2,1,"td",13),t.BQk(),t.ynx(25,14),t.YNc(26,k,2,0,"th",12),t.YNc(27,O,2,1,"td",13),t.BQk(),t.ynx(28,15),t.YNc(29,M,2,0,"th",12),t.YNc(30,S,3,6,"td",13),t.BQk(),t.ynx(31,16),t.YNc(32,$,2,0,"th",12),t.YNc(33,H,2,1,"td",13),t.BQk(),t.ynx(34,17),t.YNc(35,R,2,0,"th",12),t.YNc(36,G,2,1,"td",13),t.BQk(),t.ynx(37,18),t.YNc(38,L,2,0,"th",12),t.YNc(39,V,2,1,"td",13),t.BQk(),t.ynx(40,19),t.YNc(41,W,2,0,"th",12),t.YNc(42,z,2,1,"td",13),t.BQk(),t.ynx(43,20),t.YNc(44,j,2,0,"th",12),t.YNc(45,w,2,1,"td",13),t.BQk(),t.ynx(46,21),t.YNc(47,K,2,0,"th",12),t.YNc(48,X,2,1,"td",13),t.BQk(),t.ynx(49,22),t.YNc(50,tt,2,0,"th",12),t.YNc(51,et,2,1,"td",13),t.BQk(),t.ynx(52,23),t.YNc(53,ot,2,0,"th",12),t.YNc(54,rt,2,1,"td",13),t.BQk(),t.ynx(55,24),t.YNc(56,at,2,0,"th",12),t.YNc(57,nt,2,1,"td",13),t.BQk(),t.ynx(58,25),t.YNc(59,it,2,0,"th",12),t.YNc(60,mt,2,1,"td",13),t.BQk(),t.ynx(61,26),t.YNc(62,lt,2,0,"th",12),t.YNc(63,st,2,1,"td",13),t.BQk(),t.ynx(64,27),t.YNc(65,ut,2,0,"th",12),t.YNc(66,ct,2,1,"td",13),t.BQk(),t.ynx(67,28),t.YNc(68,ft,2,0,"th",12),t.YNc(69,pt,2,1,"td",13),t.BQk(),t.ynx(70,29),t.YNc(71,dt,2,0,"th",12),t.YNc(72,_t,2,1,"td",13),t.BQk(),t.ynx(73,30),t.YNc(74,ht,2,0,"th",12),t.YNc(75,Zt,2,1,"td",13),t.BQk(),t.ynx(76,31),t.YNc(77,gt,2,0,"th",12),t.YNc(78,Ct,2,1,"td",13),t.BQk(),t.ynx(79,32),t.YNc(80,Tt,2,0,"th",12),t.YNc(81,At,2,1,"td",13),t.BQk(),t.ynx(82,33),t.YNc(83,bt,2,0,"th",34),t.YNc(84,qt,2,1,"td",13),t.BQk(),t.ynx(85,35),t.YNc(86,Nt,2,0,"th",12),t.YNc(87,Ut,3,6,"td",13),t.BQk(),t.ynx(88,36),t.YNc(89,xt,2,0,"th",12),t.YNc(90,Pt,3,6,"td",13),t.BQk(),t.ynx(91,37),t.YNc(92,Dt,2,0,"th",34),t.YNc(93,Et,7,0,"td",13),t.BQk(),t.YNc(94,vt,1,0,"tr",38),t.YNc(95,yt,1,0,"tr",39),t.qZA()(),t.YNc(96,Yt,1,0,"mat-progress-bar",40),t._UZ(97,"mat-paginator",41)),2&o){const n=t.MAs(13);t.xp6(9),t.Q6J("matMenuTriggerFor",n),t.xp6(10),t.Q6J("ngIf",a.isEnabledFilter),t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(73),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",a.isLoadingData),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,Ft))("pageSize",5)}},dependencies:[f.O5,p.rH,P.Hw,D.lW,F.d,A.VK,A.OP,A.p6,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,d.KE,d.hX,d.R9,E.Nt,N.NW,C.YE,C.nU,I.pW,f.uU]}),e})();var m=i(4006),b=i(515),Qt=i(8505),Jt=i(4004),c=i(3562),g=i(3789),Bt=i(5300),v=i(4385),kt=i(3238),y=i(7957);const Ot=["autoUf"],Mt=["cep"];function St(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function $t(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function Ht(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Formato inv\xe1lido. "),t.qZA())}function Rt(e,r){if(1&e&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o.nome," ")}}function Gt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function Lt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function Vt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function Wt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function zt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function jt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function wt(e,r){if(1&e&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o.nome," ")}}function Kt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function Xt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Valor selecionado \xe9 inv\xe1lido. "),t.qZA())}function te(e,r){if(1&e&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o.nome," ")}}function ee(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function oe(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Valor selecionado \xe9 inv\xe1lido. "),t.qZA())}function re(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function ae(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function ne(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function ie(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function me(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Campo \xe9 requerido. "),t.qZA())}function le(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," E-mail inv\xe1lido. "),t.qZA())}function se(e,r){if(1&e&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.AsE(" (+",((null==o.form.controls.categoriaCNH.value?null:o.form.controls.categoriaCNH.value.length)||0)-1," ",2===(null==o.form.controls.categoriaCNH.value?null:o.form.controls.categoriaCNH.value.length)?"outro":"outros",") ")}}function ue(e,r){if(1&e&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}let Y=(()=>{class e{constructor(o,a,n,l,s,_){this.fb=o,this.brInfo=a,this.helper=n,this.professorService=l,this.route=s,this.router=_,this.formMode=g.h.INSERT,this.entity={},this.displayAuto=Z.W.displayAuto,this.naturalidade$=b.E,this.ufs$=b.E,this.municipios$=b.E,this.fieldsLoader$=[],this._autoUf={},this._cep={},this.categoriasCNH=["A","B","C","D","E"],this.foto={},this.imageBlob="/assets/user.png",this.form=this.fb.group({nome:["",m.kI.required],nascimento:["",[m.kI.required,c.d.date()]],naturalidade:["",m.kI.required],cpf:["",[m.kI.required,c.d.number()]],rg:["",[m.kI.required,c.d.number()]],orgaoEmissor:["",m.kI.required],endereco:this.fb.group({cep:["",c.d.number()],rua:["",m.kI.required],numero:["",c.d.number()],bairro:["",m.kI.required],municipio:["",[m.kI.required,c.d.autocompleteValidator()]],uf:["",[m.kI.required,c.d.autocompleteValidator()]]}),telefone:["",c.d.number()],celular:["",[m.kI.required,c.d.number()]],email:["",[m.kI.required,m.kI.email]],pai:[""],mae:[""],habilitacao:["",[m.kI.required]],categoriaCNH:[""]})}ngOnInit(){this.initCEP(),this.naturalidade$=this.brInfo.initCityAutocomplete(this.form.controls.naturalidade),this.municipios$=this.brInfo.initCityAutocomplete(this.form.controls.endereco.controls.municipio,this.form.controls.endereco.controls.uf),this.ufs$=this.brInfo.getStates().pipe((0,Qt.b)(()=>this.loadFormData()))}initCEP(){this.form.controls.endereco.controls.cep.valueChanges.pipe((0,Jt.U)(()=>this._cep.nativeElement.value),(0,T.h)(o=>8===o.length),(0,U.w)(o=>this.brInfo.searchByCEP(""+o)),(0,T.h)(o=>o&&!o.erro)).subscribe(o=>{const a=this.form.controls.endereco.controls,n=a.rua,l=a.bairro,s=a.uf,_=a.municipio;""===n.value&&n.setValue(o.logradouro),""===l.value&&l.setValue(o.bairro),""===s.value&&s.setValue(this._autoUf.options.find(h=>h.value.sigla===o.uf)?.value),""===_.value&&this.brInfo.getCityByName(o.localidade).subscribe(h=>{this.form.controls.endereco.controls.municipio.setValue(h)})})}loadFormData(){this.route.snapshot.params.id?(this.formMode=g.h.UPDATE,this.professorService.show(this.route.snapshot.params.id).subscribe({next:o=>{if(o.id){this.entity={...o},this.brInfo.getCityByName(o.naturalidade).subscribe(n=>{this.form.controls.naturalidade.setValue(n)}),this.form.controls.endereco.controls.uf.setValue(this._autoUf.options.find(n=>n.value.nome===o.endereco.uf)?.value),this.brInfo.getCityByName(o.endereco.municipio).subscribe(n=>{this.form.controls.endereco.controls.municipio.setValue(n)});const a={...o,categoriaCNH:o.categoriaCNH?.split("")};delete a.endereco.uf,delete a.endereco.municipio,this.form.patchValue(a),this.entity.foto&&(this.imageBlob=this.entity.foto)}else this.navigateToTable()}})):(this.formMode=g.h.INSERT,this.entity={})}onChooseFile(o){const a=o.target.files?.item(0);a&&this.helper.fileReader(a).then(n=>this.helper.image(n)).then(n=>this.imageBlob=this.helper.resizePicute(n,420))}onSubmit(){this.form.valid?(this.entity={...this.entity,...this.form.value},this.entity.categoriaCNH=(this.entity.categoriaCNH||[]).join(""),"/assets/user.png"!==this.imageBlob&&(this.entity.foto=this.imageBlob),this.formMode===g.h.INSERT?this.professorService.store({...this.entity}).subscribe({next:()=>{this.helper.alertSnack("Inserido com sucesso."),this.navigateToTable()},error:o=>this.defaultError(o)}):this.professorService.update(this.entity).subscribe({next:()=>{this.helper.alertSnack("Atualizado com sucesso."),this.navigateToTable()},error:o=>this.defaultError(o)})):this.form.markAllAsTouched()}navigateToTable(){this.router.navigate(["professor"])}defaultError(o){this.helper.alertSnack(403==o.status?"Sem permiss\xe3o para esta opera\xe7\xe3o":"Ocorreu um erro")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.qu),t.Y36(Bt.N),t.Y36(Z.W),t.Y36(x.c),t.Y36(p.gz),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-professor-form"]],viewQuery:function(o,a){if(1&o&&(t.Gf(Ot,5),t.Gf(Mt,5)),2&o){let n;t.iGM(n=t.CRH())&&(a._autoUf=n.first),t.iGM(n=t.CRH())&&(a._cep=n.first)}},decls:137,vars:41,consts:[[1,"form-view"],[1,"header-form"],[1,"mat-h1"],[1,"flex-form",3,"formGroup"],[1,"ocupy3"],["matInput","","type","text","placeholder","Nome","formControlName","nome"],[4,"ngIf"],["matInput","","type","date","placeholder","Nascimento","formControlName","nascimento"],["matInput","","type","text","placeholder","Naturalidade","formControlName","naturalidade",3,"matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["autoNaturalidade","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","placeholder","CPF","formControlName","cpf"],["matInput","","type","number","placeholder","RG","formControlName","rg"],["matInput","","type","text","placeholder","Org\xe3o Emissor","formControlName","orgaoEmissor"],["formGroupName","endereco",1,"ocupy","flex-form"],["matInput","","type","number","placeholder","CEP","formControlName","cep"],["cep",""],["matInput","","type","text","placeholder","Rua, avenida, logradouro, etc.","formControlName","rua"],["matInput","","type","number","placeholder","N\xfamero","formControlName","numero"],["matInput","","type","text","placeholder","Bairro","formControlName","bairro"],["matInput","","type","text","placeholder","Estado","formControlName","uf",3,"matAutocomplete"],["autoUf","matAutocomplete"],["matInput","","type","text","placeholder","Munic\xedpio","formControlName","municipio",3,"matAutocomplete"],["autoMunicipio","matAutocomplete"],["matInput","","type","number","placeholder","Telefone","formControlName","telefone","maxlength","11"],["matInput","","type","number","placeholder","Celular","formControlName","celular","maxlength","11"],[1,"ocupy2"],["matInput","","type","text","placeholder","Pai","formControlName","pai"],["matInput","","type","text","placeholder","M\xe3e","formControlName","mae"],["matInput","","type","text","placeholder","E-mail","formControlName","email"],["matInput","","type","text","placeholder","Grau de instru\xe7\xe3o / Titula\xe7\xe3o","formControlName","habilitacao"],["formControlName","categoriaCNH","multiple",""],["class","select-additional-selection",4,"ngIf"],[1,"ocupy","flex"],[1,"pic-preview",3,"src"],[1,"flex-upload"],["matInput","","type","text","placeholder","Foto","disabled","",3,"value"],["type","button","mat-flat-button","","color","primary",3,"click"],["hidden","","type","file","accept","image/*",3,"change"],["photo",""],[1,"bottom-form"],[1,"toolbar-spacer"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",1,"ml-2",3,"click"],[3,"value"],[1,"select-additional-selection"]],template:function(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA()(),t.TgZ(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Nome"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,St,2,0,"mat-error",6),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Nascimento"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,$t,2,0,"mat-error",6),t.YNc(15,Ht,2,0,"mat-error",6),t.qZA(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"Naturalidade"),t.qZA(),t._UZ(19,"input",8),t.TgZ(20,"mat-autocomplete",9,10),t.YNc(22,Rt,2,2,"mat-option",11),t.ALo(23,"async"),t.qZA(),t.YNc(24,Gt,2,0,"mat-error",6),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-label"),t._uU(27,"CPF"),t.qZA(),t._UZ(28,"input",12),t.YNc(29,Lt,2,0,"mat-error",6),t.qZA(),t.TgZ(30,"mat-form-field")(31,"mat-label"),t._uU(32,"RG"),t.qZA(),t._UZ(33,"input",13),t.YNc(34,Vt,2,0,"mat-error",6),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37,"Org\xe3o Emissor"),t.qZA(),t._UZ(38,"input",14),t.YNc(39,Wt,2,0,"mat-error",6),t.qZA(),t.TgZ(40,"fieldset",15)(41,"mat-form-field")(42,"mat-label"),t._uU(43,"CEP"),t.qZA(),t._UZ(44,"input",16,17),t.qZA(),t.TgZ(46,"mat-form-field",4)(47,"mat-label"),t._uU(48,"Rua"),t.qZA(),t._UZ(49,"input",18),t.YNc(50,zt,2,0,"mat-error",6),t.qZA(),t.TgZ(51,"mat-form-field")(52,"mat-label"),t._uU(53,"N\xfamero"),t.qZA(),t._UZ(54,"input",19),t.qZA(),t.TgZ(55,"mat-form-field")(56,"mat-label"),t._uU(57,"Bairro"),t.qZA(),t._UZ(58,"input",20),t.YNc(59,jt,2,0,"mat-error",6),t.qZA(),t.TgZ(60,"mat-form-field")(61,"mat-label"),t._uU(62,"Estado"),t.qZA(),t._UZ(63,"input",21),t.TgZ(64,"mat-autocomplete",9,22),t.YNc(66,wt,2,2,"mat-option",11),t.ALo(67,"async"),t.qZA(),t.YNc(68,Kt,2,0,"mat-error",6),t.YNc(69,Xt,2,0,"mat-error",6),t.qZA(),t.TgZ(70,"mat-form-field")(71,"mat-label"),t._uU(72,"Munic\xedpio"),t.qZA(),t._UZ(73,"input",23),t.TgZ(74,"mat-autocomplete",9,24),t.YNc(76,te,2,2,"mat-option",11),t.ALo(77,"async"),t.qZA(),t.YNc(78,ee,2,0,"mat-error",6),t.YNc(79,oe,2,0,"mat-error",6),t.qZA()(),t.TgZ(80,"mat-form-field")(81,"mat-label"),t._uU(82,"Telefone"),t.qZA(),t._UZ(83,"input",25),t.YNc(84,re,2,0,"mat-error",6),t.qZA(),t.TgZ(85,"mat-form-field")(86,"mat-label"),t._uU(87,"Celular"),t.qZA(),t._UZ(88,"input",26),t.YNc(89,ae,2,0,"mat-error",6),t.qZA(),t.TgZ(90,"mat-form-field",27)(91,"mat-label"),t._uU(92,"Pai"),t.qZA(),t._UZ(93,"input",28),t.YNc(94,ne,2,0,"mat-error",6),t.qZA(),t.TgZ(95,"mat-form-field",27)(96,"mat-label"),t._uU(97,"M\xe3e"),t.qZA(),t._UZ(98,"input",29),t.YNc(99,ie,2,0,"mat-error",6),t.qZA(),t.TgZ(100,"mat-form-field",27)(101,"mat-label"),t._uU(102,"E-mail"),t.qZA(),t._UZ(103,"input",30),t.YNc(104,me,2,0,"mat-error",6),t.YNc(105,le,2,0,"mat-error",6),t.qZA(),t.TgZ(106,"mat-form-field")(107,"mat-label"),t._uU(108,"Habilita\xe7\xe3o"),t.qZA(),t._UZ(109,"input",31),t.qZA(),t.TgZ(110,"mat-form-field")(111,"mat-label"),t._uU(112,"Categoria da CNH"),t.qZA(),t.TgZ(113,"mat-select",32)(114,"mat-select-trigger"),t._uU(115),t.YNc(116,se,2,2,"span",33),t.qZA(),t.YNc(117,ue,2,2,"mat-option",11),t.qZA()(),t.TgZ(118,"div",34),t._UZ(119,"img",35),t.TgZ(120,"div",36)(121,"mat-form-field")(122,"mat-label"),t._uU(123,"Foto"),t.qZA(),t._UZ(124,"input",37),t.qZA(),t.TgZ(125,"button",38),t.NdJ("click",function(){t.CHM(n);const s=t.MAs(130);return t.KtG(s.click())}),t.TgZ(126,"mat-icon"),t._uU(127,"attach_file"),t.qZA(),t._uU(128,"Anexar "),t.qZA(),t.TgZ(129,"input",39,40),t.NdJ("change",function(s){return a.onChooseFile(s)}),t.qZA()()()(),t.TgZ(131,"div",41),t._UZ(132,"span",42),t.TgZ(133,"button",43),t.NdJ("click",function(){return a.onSubmit()}),t._uU(134,"Salvar"),t.qZA(),t.TgZ(135,"button",44),t.NdJ("click",function(){return a.navigateToTable()}),t._uU(136,"Cancelar"),t.qZA()()()}if(2&o){const n=t.MAs(21),l=t.MAs(65),s=t.MAs(75),_=t.MAs(130);let h;t.xp6(3),t.hij("",0===a.formMode?"Novo":"Editar"," Professor"),t.xp6(1),t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",a.form.controls.nome.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.nascimento.hasError("required")),t.xp6(1),t.Q6J("ngIf",a.form.controls.nascimento.hasError("pattern")),t.xp6(4),t.Q6J("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",a.displayAuto("nome")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(23,35,a.naturalidade$)),t.xp6(2),t.Q6J("ngIf",a.form.controls.naturalidade.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.cpf.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.rg.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.orgaoEmissor.hasError("required")),t.xp6(11),t.Q6J("ngIf",a.form.controls.endereco.controls.rua.hasError("required")),t.xp6(9),t.Q6J("ngIf",a.form.controls.endereco.controls.bairro.hasError("required")),t.xp6(4),t.Q6J("matAutocomplete",l),t.xp6(1),t.Q6J("displayWith",a.displayAuto("nome")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(67,37,a.ufs$)),t.xp6(2),t.Q6J("ngIf",a.form.controls.endereco.controls.uf.hasError("required")),t.xp6(1),t.Q6J("ngIf",!a.form.controls.endereco.controls.uf.hasError("required")&&a.form.controls.endereco.controls.uf.hasError("invalidAutocomplete")),t.xp6(4),t.Q6J("matAutocomplete",s),t.xp6(1),t.Q6J("displayWith",a.displayAuto("nome")),t.xp6(2),t.Q6J("ngForOf",t.lcZ(77,39,a.municipios$)),t.xp6(2),t.Q6J("ngIf",a.form.controls.endereco.controls.municipio.hasError("required")),t.xp6(1),t.Q6J("ngIf",!a.form.controls.endereco.controls.municipio.hasError("required")&&a.form.controls.endereco.controls.municipio.hasError("invalidAutocomplete")),t.xp6(5),t.Q6J("ngIf",a.form.controls.telefone.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.celular.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.pai.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.controls.mae.hasError("required")),t.xp6(5),t.Q6J("ngIf",a.form.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.form.get("email").hasError("email")),t.xp6(10),t.hij(" ",(null==a.form.controls.categoriaCNH.value?null:a.form.controls.categoriaCNH.value[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==a.form.controls.categoriaCNH.value?null:a.form.controls.categoriaCNH.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",a.categoriasCNH),t.xp6(2),t.s9C("src",a.imageBlob,t.LSH),t.xp6(5),t.Q6J("value",null==_.files||null==(h=_.files.item(0))?null:h.name)}},dependencies:[f.sg,f.O5,P.Hw,D.lW,d.TO,d.KE,d.hX,E.Nt,v.gD,v.$L,kt.ey,y.XC,y.ZL,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.nD,m.sg,m.u,m.x0,f.Ov]}),e})();const ce=[{path:"",component:It},{path:"create",component:Y},{path:":id/edit",component:Y}];let fe=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(ce),p.Bz]}),e})();var pe=i(9443);let de=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,fe,pe.q,m.UX]}),e})()}}]);